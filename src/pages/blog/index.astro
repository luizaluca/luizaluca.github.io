---
import BaseLayout from '../../layouts/BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';
import { getSortedPosts, legacyPostPath } from '../../utils/posts';

const posts: CollectionEntry<'blog'>[] = await getSortedPosts();
---

<BaseLayout title="Articole" description="Articole de pedodonție pentru părinți.">
  <section class="mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
    <h1 class="text-4xl font-semibold">Articole</h1>
    <div class="mt-8 grid grid-cols-1 gap-8 md:grid-cols-2">
      {
        posts.map((post) => (
          <a href={legacyPostPath(post)} class="rounded border p-4 hover:border-medicenter_color">
            {post.data.image && (
              <img
                src={post.data.image}
                alt={post.data.title}
                class="h-56 w-full rounded object-cover"
                loading="lazy"
              />
            )}
            <h2 class="mt-4 text-xl font-semibold">{post.data.title}</h2>
            <p class="mt-2 text-gray-600">{post.data.description || post.body.slice(0, 140)}</p>
          </a>
        ))
      }
    </div>
  </section>
</BaseLayout>
